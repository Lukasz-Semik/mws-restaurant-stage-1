const dbPromise=idb.open("restaurants-db",2,a=>{switch(a.oldVersion){case 0:a.createObjectStore("restaurants");case 1:a.createObjectStore("sync-reviews");}});fetchAllAndPrepareForDisplay=a=>{dbPromise.then(function(a){var b=a.transaction("restaurants"),c=b.objectStore("restaurants");return c.get("restaurantsCollection")}).then(b=>{b&&0<b.length?a(b):fetch("http://localhost:1337/restaurants").then(a=>a.json()).then(b=>{dbPromise.then(c=>{const d=c.transaction("restaurants","readwrite"),e=d.objectStore("restaurants");return e.put(b,"restaurantsCollection"),a(b),d.complete})}).catch(a=>console.log(a))})};class DBHelper{static get DATABASE_URL(){return`http://localhost:${1337}/data/restaurants.json`}static urlForRestaurant(a){return`./restaurant.html?id=${a.id}`}static imageUrlForRestaurant(a,b){if(!a.photograph)return"";const c=a.photograph.charAt(0);return b&&570<window.innerWidth?`/img/${c}-650_large_1x.jpg`:b?`/img/${c}-370_medium_1x.jpg`:`/img/${c}-236_small_1x.jpg`}static mapMarkerForRestaurant(a,b){const c=new google.maps.Marker({position:a.latlng,title:a.name,url:DBHelper.urlForRestaurant(a),map:b,animation:google.maps.Animation.DROP});return c,c}}const btnVS=document.getElementById("view-switcher"),mapContainer=document.getElementById("map-container");let mapVisible=!1;const btnFilter=document.getElementById("view-switcher-filter"),closeBtn=document.getElementById("filter-close"),filterOptions=document.getElementById("filter-options");btnVS.addEventListener("click",()=>{mapVisible?(mapContainer.classList.remove("content__left--visible"),mapVisible=!1,btnVS.innerHTML=`
    <i class="fas fa-map fa-lg icon"></i>
    `):(mapContainer.classList.add("content__left--visible"),mapVisible=!0,btnVS.innerHTML=`
    <i class="fas fa-table fa-lg icon"></i>
    `)}),btnFilter&&btnFilter.addEventListener("click",()=>{filterOptions.classList.add("filter-options--expanded")}),closeBtn&&closeBtn.addEventListener("click",()=>{filterOptions.classList.remove("filter-options--expanded")});